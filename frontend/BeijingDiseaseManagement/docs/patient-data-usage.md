# 患者数据使用说明

## 📊 数据处理完成

已成功处理了 `src/mock/histable.text` 文件中的 **2007 条** 患者记录，并进行了数据脱敏处理。

## 🔒 数据脱敏规则

### 姓名脱敏

- 原始：`李华梅`
- 脱敏后：`李*梅`
- 规则：保留首尾字符，中间用`*`替换

### 身份证号脱敏

- 原始：`532329196607190026`
- 脱敏后：`**********0026`
- 规则：只显示后 4 位，前面用`*`替换

## 📁 生成的文件

1. **`src/mock/patient-data-full.ts`** - 完整的患者数据 mock 文件
2. **`src/api/patient.ts`** - 患者相关 API 接口
3. **`src/views/patient/detail/index.vue`** - 更新后的患者详情页面

## 🚀 功能特性

### 患者列表功能

- ✅ 分页显示（默认每页 10 条）
- ✅ 搜索功能（支持姓名、住院号、诊断、地址搜索）
- ✅ 排序功能（支持按任意字段排序）
- ✅ 数据脱敏显示

### 患者详情功能

- ✅ 基本信息展示
- ✅ 诊断信息展示
- ✅ 病史信息展示
- ✅ 点击查看详情

### API 接口

- `GET /api/patients` - 获取患者列表
- `GET /api/patients/:id` - 获取患者详情
- `GET /api/patients/stats` - 获取患者统计信息
- `GET /api/patients/search` - 搜索患者

## 📋 数据字段说明

| 字段名       | 说明               | 示例                    |
| ------------ | ------------------ | ----------------------- |
| 住院流水号号 | 患者住院流水号     | ZY110001456658          |
| 姓名         | 患者姓名（已脱敏） | 李\*梅                  |
| 身份证号     | 身份证号（已脱敏） | \***\*\*\*\*\***0026    |
| 职业         | 患者职业           | 其他                    |
| 血型         | 血型               | 未查                    |
| T            | T 分期             | 3                       |
| N            | N 分期             | 1                       |
| M            | M 分期             | 1                       |
| TNM 分期     | TNM 分期           | IV                      |
| 临床分期     | 临床分期           | -                       |
| 住址         | 患者住址           | 云南省楚雄彝族自治州... |
| 电话         | 联系电话           | 15891837168             |
| 工作单位     | 工作单位           | 云南省楚雄彝族自治州... |
| 诊断         | 主要诊断           | 乙状结肠恶性肿瘤        |
| 住院诊断     | 住院诊断           | 恶性肿瘤靶向治疗        |
| 病理诊断     | 病理诊断           | 腺癌                    |

## 🔧 如何使用

### 1. 访问患者详情页面

```
http://localhost:3000/patient/detail
```

### 2. 搜索患者

在搜索框中输入关键词，支持：

- 患者姓名（脱敏后的）
- 住院号
- 诊断信息
- 地址信息

### 3. 查看患者详情

点击表格中的"查看详情"按钮，可以查看完整的患者信息。

### 4. 分页浏览

- 默认每页显示 10 条记录
- 可以调整每页显示数量
- 支持跳转到指定页面

## 📈 数据统计

处理后的数据包含：

- **总记录数**：2007 条
- **职业分布**：农民、工人、职员、退(离)休人员等
- **血型分布**：A、B、O、AB、未查、不详
- **TNM 分期**：I、II、III、IV 等不同分期
- **诊断类型**：各种恶性肿瘤诊断

## 🔄 更新数据

如果需要更新数据，可以：

1. 准备新的 Excel 文件（制表符分隔的文本格式）
2. 运行处理脚本：
   ```bash
   node scripts/process-excel-data.js <输入文件> <输出文件>
   ```
3. 更新 mock 文件中的导入

## ⚠️ 注意事项

1. **数据脱敏**：姓名和身份证号已进行脱敏处理，保护患者隐私
2. **数据完整性**：部分字段可能为空，页面会显示"无"
3. **性能考虑**：2007 条数据量较大，建议使用分页和搜索功能
4. **Mock 数据**：当前使用的是 mock 数据，生产环境需要连接真实 API

## 🎯 下一步

1. 测试所有功能是否正常工作
2. 根据实际需求调整页面布局
3. 添加更多统计图表
4. 集成真实的 API 接口
